<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Enhanced Synonym Mind Map Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    .container {
      max-width: 1000px;
      margin: 20px auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      padding: 32px 22px 42px 22px;
      min-height: calc(100vh - 40px);
      box-sizing: border-box;
    }
    h1 {
      text-align: center;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 18px;
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: -0.5px;
    }
    .inputRow {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 16px;
      margin-bottom: 32px;
      flex-wrap: wrap;
    }
    #wordInput {
      padding: 14px 18px;
      font-size: 1.1rem;
      min-width: 200px;
      border-radius: 12px;
      border: 2px solid #e1e8f0;
      outline: none;
      background: white;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    #wordInput:focus {
      border-color: #667eea;
      box-shadow: 0 4px 20px rgba(102, 126, 234, 0.2);
      transform: translateY(-1px);
    }
    .btn {
      color: white;
      font-weight: 600;
      padding: 14px 32px;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    #generateBtn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    #clearBtn {
      background: linear-gradient(135deg, #f093fb, #f5576c);
      box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
    }
    .btn:hover {
      transform: translateY(-2px);
    }
    #generateBtn:hover {
      box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
    }
    #clearBtn:hover {
      box-shadow: 0 6px 25px rgba(240, 147, 251, 0.4);
    }
    .btn:active {
      transform: translateY(0);
    }
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
      margin-right: 8px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .pagination-controls {
      text-align: center;
      margin: 20px 0;
      display: none;
    }
    .page-btn {
      background: linear-gradient(135deg, #43e97b, #38f9d7);
      color: white;
      border: none;
      padding: 8px 16px;
      margin: 0 5px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .page-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(67, 233, 123, 0.3);
    }
    .page-btn.active {
      background: linear-gradient(135deg, #ffd89b, #19547b);
    }
    .page-info {
      display: inline-block;
      margin: 0 15px;
      color: #666;
      font-weight: 600;
    }
    #mindMapArea {
      position: relative;
      width: 100%;
      min-height: 600px;
      margin: 0 auto;
      margin-top: 15px;
      border-radius: 16px;
      background: radial-gradient(circle at center, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.4) 100%);
      overflow: hidden;
    }
    .center-word {
      position: absolute;
      top: 50%;
      left: 50%;
      background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
      color: white;
      font-weight: bold;
      border-radius: 50px;
      box-shadow: 0 8px 30px rgba(255, 216, 155, 0.4);
      font-size: 1.4rem;
      padding: 20px 36px;
      transform: translate(-50%,-50%);
      text-align: center;
      z-index: 10;
      animation: pulse 2s ease-in-out infinite;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    @keyframes pulse {
      0%, 100% { transform: translate(-50%,-50%) scale(1); }
      50% { transform: translate(-50%,-50%) scale(1.05); }
    }
    .synonym-node {
      position: absolute;
      width: 280px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      padding: 18px;
      text-align: center;
      z-index: 5;
      transition: all 0.3s ease;
      animation: fadeInScale 0.6s ease-out backwards;
    }
    .synonym-node:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 12px 40px rgba(0,0,0,0.15);
    }
    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .synonym-label {
      display: inline-block;
      font-weight: 700;
      border-radius: 12px;
      padding: 8px 16px;
      margin-bottom: 12px;
      font-size: 1.1rem;
      cursor: pointer;
      color: white;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
    }
    .synonym-label:hover {
      transform: scale(1.05);
    }
    .example {
      font-size: 0.9rem;
      margin-top: 8px;
      color: #4a5568;
      padding: 10px 12px;
      border-radius: 8px;
      background: rgba(255,255,255,0.7);
      min-height: 45px;
      line-height: 1.4em;
      text-align: left;
      border-left: 3px solid;
      font-style: italic;
      max-height: 90px;
      overflow-y: auto;
    }
    .example-source {
      font-size: 0.75rem;
      color: #666;
      margin-top: 5px;
      font-weight: 500;
    }
    svg {
      position: absolute;
      top: 0; 
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    .connection-line {
      stroke-width: 2;
      stroke-linecap: round;
      opacity: 0.6;
      animation: drawLine 0.8s ease-out forwards;
      stroke-dasharray: 1000;
      stroke-dashoffset: 1000;
    }
    @keyframes drawLine {
      to {
        stroke-dashoffset: 0;
      }
    }
    .stats {
      text-align: center;
      margin-top: 20px;
      padding: 16px;
      background: rgba(255,255,255,0.8);
      border-radius: 12px;
      font-size: 0.9rem;
      color: #666;
    }
    .error-message {
      text-align: center;
      margin-top: 160px;
      color: #e53e3e;
      font-size: 1.1rem;
      padding: 20px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 12px;
      border: 2px solid #fed7d7;
    }
    @media (max-width: 768px) {
      .container {
        margin: 10px;
        padding: 20px 16px;
        min-height: calc(100vh - 20px);
      }
      h1 { font-size: 2rem; }
      #mindMapArea { min-height: 500px; }
      .synonym-node { 
        width: 260px; 
        font-size: 0.9em;
      }
      .center-word { 
        font-size: 1.2rem; 
        padding: 16px 28px; 
      }
      .inputRow { 
        flex-direction: column; 
        gap: 12px; 
      }
    }
    @media (max-width: 480px) {
      #wordInput { min-width: 280px; }
      #mindMapArea { min-height: 450px; }
      .synonym-node { width: 280px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>✨ Synonym Mind Map Generator</h1>
    <div class="inputRow">
      <input type="text" id="wordInput" placeholder="Enter a word to explore..." maxlength="32" />
      <button id="generateBtn" class="btn">Generate Map</button>
      <button id="clearBtn" class="btn">Clear</button>
    </div>
    <div class="pagination-controls" id="paginationControls">
      <button class="page-btn" id="prevPage">← Previous</button>
      <span class="page-info" id="pageInfo">Page 1 of 1</span>
      <button class="page-btn" id="nextPage">Next →</button>
    </div>
    <div id="mindMapArea"></div>
  </div>
  <script>
    const colorPalette = [
      'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
      'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
      'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
      'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
      'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
      'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
      'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',
      'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)'
    ];

    const borderColors = [
      '#667eea', '#f5576c', '#00f2fe', '#38f9d7', 
      '#fee140', '#fed6e3', '#fecfef', '#fcb69f'
    ];

    let allSynonyms = [];
    let currentPage = 0;
    let mainWord = '';
    const SYNONYMS_PER_PAGE = 8;
    let isGenerating = false;

    // Event listeners
    document.getElementById('generateBtn').addEventListener('click', generateMindMap);
    document.getElementById('clearBtn').addEventListener('click', clearMap);
    document.getElementById('wordInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') generateMindMap();
    });
    document.getElementById('prevPage').addEventListener('click', () => changePage(-1));
    document.getElementById('nextPage').addEventListener('click', () => changePage(1));

    function clearMap() {
      document.getElementById('wordInput').value = '';
      document.getElementById('mindMapArea').innerHTML = '';
      document.getElementById('paginationControls').style.display = 'none';
      allSynonyms = [];
      currentPage = 0;
      mainWord = '';
      document.getElementById('wordInput').focus();
    }

    async function generateMindMap() {
      if (isGenerating) return;
      
      const word = document.getElementById('wordInput').value.trim();
      if (!word) {
        alert('Please enter a word.');
        return;
      }

      isGenerating = true;
      mainWord = word;
      const btn = document.getElementById('generateBtn');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<span class="loading"></span>Generating...';
      btn.disabled = true;

      document.getElementById('mindMapArea').innerHTML = `
        <div style="text-align:center; margin-top:200px; color:#666; font-size:1.1rem;">
          <div class="loading" style="margin:0 auto 16px;"></div>
          Fetching synonyms for "${word}"...
        </div>
      `;

      try {
        let synonyms = await fetchSynonyms(word);
        
        // Remove duplicates and filter
        synonyms = synonyms.filter((w, i, a) => 
          i === a.findIndex(({word: b}) => b.toLowerCase() === w.word.toLowerCase()) &&
          w.word.toLowerCase() !== word.toLowerCase()
        );

        if (synonyms.length === 0) {
          document.getElementById('mindMapArea').innerHTML = `
            <div class="error-message">
              <strong>No synonyms found for "${word}"</strong><br>
              Try a different word or check your spelling.
            </div>
          `;
          document.getElementById('paginationControls').style.display = 'none';
        } else {
          allSynonyms = synonyms;
          currentPage = 0;
          
          // Fetch contextual examples for all synonyms
          await fetchContextualExamples(word, synonyms.slice(0, Math.min(20, synonyms.length)));
          
          setupPagination();
          showCurrentPage();
        }
      } catch (error) {
        document.getElementById('mindMapArea').innerHTML = `
          <div class="error-message">
            <strong>Error loading synonyms</strong><br>
            Please check your internet connection and try again.
          </div>
        `;
        document.getElementById('paginationControls').style.display = 'none';
      } finally {
        isGenerating = false;
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    }

    async function fetchSynonyms(word) {
      try {
        const response = await fetch('https://api.datamuse.com/words?rel_syn=' + encodeURIComponent(word));
        if (!response.ok) throw new Error('API request failed');
        return await response.json();
      } catch (error) {
        console.error('Error fetching synonyms:', error);
        return getSampleSynonyms(word);
      }
    }

    async function fetchContextualExamples(mainWord, synonyms) {
      // Try to fetch real examples from multiple sources
      for (let i = 0; i < synonyms.length; i++) {
        const synonym = synonyms[i];
        try {
          // Try Datamuse API for example sentences
          const response = await fetch(`https://api.datamuse.com/words?rel_trg=${encodeURIComponent(synonym.word)}&md=d&max=1`);
          if (response.ok) {
            const data = await response.json();
            if (data.length > 0 && data[0].defs && data[0].defs.length > 0) {
              // Extract definition and create a natural example
              const definition = data[0].defs[0].replace(/^[a-z]\t/, ''); // Remove part of speech prefix
              synonym.contextualExample = createNaturalExample(synonym.word, definition);
              synonym.source = "Dictionary";
              continue;
            }
          }
          
          // Fallback to improved contextual examples
          synonym.contextualExample = getImprovedContextualExample(mainWord, synonym.word);
          synonym.source = "Generated";
          
        } catch (error) {
          synonym.contextualExample = getImprovedContextualExample(mainWord, synonym.word);
          synonym.source = "Generated";
        }
        
        // Add small delay to avoid overwhelming APIs
        if (i < synonyms.length - 1) {
          await new Promise(resolve => setTimeout(resolve, 100));
        }
      }
    }

    function createNaturalExample(word, definition) {
      // Create more natural examples based on definitions
      const templates = [
        `Her ${word} expression lit up the entire room.`,
        `The ${word} approach proved to be very effective.`,
        `He felt genuinely ${word} about the news.`,
        `The team's ${word} effort led to great success.`,
        `She chose the most ${word} option available.`,
        `The ${word} response exceeded all expectations.`
      ];
      
      return templates[Math.floor(Math.random() * templates.length)];
    }

    function getImprovedContextualExample(mainWord, synonym) {
      // Generate more varied and natural contextual examples
      const contexts = [
        {
          template: `The team was ${synonym} to finally complete the challenging project.`,
          words: ['happy', 'excited', 'thrilled', 'pleased', 'delighted', 'glad', 'elated']
        },
        {
          template: `She made a ${synonym} decision that benefited everyone involved.`,
          words: ['good', 'wise', 'smart', 'excellent', 'brilliant', 'clever', 'sound']
        },
        {
          template: `The ${synonym} building dominated the city skyline impressively.`,
          words: ['big', 'huge', 'massive', 'enormous', 'large', 'gigantic', 'towering']
        },
        {
          template: `His ${synonym} response to the question impressed the interviewer.`,
          words: ['quick', 'fast', 'rapid', 'swift', 'immediate', 'prompt', 'speedy']
        },
        {
          template: `The garden looked absolutely ${synonym} in the morning sunlight.`,
          words: ['beautiful', 'gorgeous', 'stunning', 'lovely', 'magnificent', 'elegant', 'splendid']
        },
        {
          template: `She gave a ${synonym} explanation of the complex scientific concept.`,
          words: ['clear', 'simple', 'straightforward', 'concise', 'precise', 'thorough', 'detailed']
        }
      ];

      // Try to find a matching context
      for (const context of contexts) {
        if (context.words.some(word => word.toLowerCase().includes(synonym.toLowerCase()) || 
                                   synonym.toLowerCase().includes(word.toLowerCase()))) {
          return context.template;
        }
      }

      // Fallback templates for any word
      const genericTemplates = [
        `The ${synonym} nature of the situation required careful consideration.`,
        `Her ${synonym} personality made her popular with colleagues.`,
        `The ${synonym} outcome surprised everyone at the meeting.`,
        `He approached the problem with a ${synonym} mindset.`,
        `The ${synonym} quality of their work was immediately apparent.`,
        `She demonstrated a ${synonym} understanding of the subject.`
      ];

      return genericTemplates[Math.floor(Math.random() * genericTemplates.length)];
    }

    function getSampleSynonyms(word) {
      const sampleData = {
        'happy': [
          {word: 'joyful'}, {word: 'cheerful'}, {word: 'delighted'}, 
          {word: 'elated'}, {word: 'content'}, {word: 'pleased'},
          {word: 'excited'}, {word: 'upbeat'}, {word: 'glad'}, {word: 'merry'}
        ],
        'big': [
          {word: 'large'}, {word: 'huge'}, {word: 'massive'}, 
          {word: 'enormous'}, {word: 'gigantic'}, {word: 'vast'},
          {word: 'immense'}, {word: 'colossal'}, {word: 'substantial'}, {word: 'tremendous'}
        ],
        'good': [
          {word: 'excellent'}, {word: 'outstanding'}, {word: 'superior'}, 
          {word: 'wonderful'}, {word: 'great'}, {word: 'fantastic'},
          {word: 'amazing'}, {word: 'superb'}, {word: 'terrific'}, {word: 'magnificent'}
        ]
      };
      
      const key = word.toLowerCase();
      return sampleData[key] || [
        {word: 'similar'}, {word: 'equivalent'}, {word: 'comparable'}, 
        {word: 'alike'}, {word: 'related'}, {word: 'corresponding'}
      ];
    }

    function setupPagination() {
      const totalPages = Math.ceil(allSynonyms.length / SYNONYMS_PER_PAGE);
      const paginationControls = document.getElementById('paginationControls');
      
      if (totalPages > 1) {
        paginationControls.style.display = 'block';
        updatePaginationInfo();
      } else {
        paginationControls.style.display = 'none';
      }
    }

    function updatePaginationInfo() {
      const totalPages = Math.ceil(allSynonyms.length / SYNONYMS_PER_PAGE);
      document.getElementById('pageInfo').textContent = `Page ${currentPage + 1} of ${totalPages}`;
      document.getElementById('prevPage').disabled = currentPage === 0;
      document.getElementById('nextPage').disabled = currentPage === totalPages - 1;
    }

    function changePage(direction) {
      const totalPages = Math.ceil(allSynonyms.length / SYNONYMS_PER_PAGE);
      const newPage = currentPage + direction;
      
      if (newPage >= 0 && newPage < totalPages) {
        currentPage = newPage;
        showCurrentPage();
        updatePaginationInfo();
      }
    }

    function showCurrentPage() {
      const startIndex = currentPage * SYNONYMS_PER_PAGE;
      const endIndex = Math.min(startIndex + SYNONYMS_PER_PAGE, allSynonyms.length);
      const pageSynonyms = allSynonyms.slice(startIndex, endIndex);
      
      drawMindMap(mainWord, pageSynonyms);
    }

    function drawMindMap(mainWord, synonyms) {
      const area = document.getElementById('mindMapArea');
      area.innerHTML = '';
      
      const rect = area.getBoundingClientRect();
      const w = Math.max(1000, rect.width);
      const h = Math.max(700, rect.height);
      
      area.style.height = h + 'px';

      // Central word
      const center = document.createElement('div');
      center.className = 'center-word';
      center.innerText = mainWord.charAt(0).toUpperCase() + mainWord.slice(1);
      area.appendChild(center);

      // Calculate positions with better spacing
      const radius = Math.min(w, h) * 0.28;
      const cx = w / 2;
      const cy = h / 2;

      // Create SVG for connections
      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      svg.setAttribute('width', w);
      svg.setAttribute('height', h);
      area.appendChild(svg);

      synonyms.forEach((synonym, i) => {
        // Better circular distribution
        const angle = (-Math.PI / 2) + (i * 2 * Math.PI) / synonyms.length;
        const x = cx + Math.cos(angle) * radius;
        const y = cy + Math.sin(angle) * radius;

        // Ensure nodes stay within boundaries
        const nodeWidth = 280;
        const nodeHeight = 140;
        const margin = 30;
        const finalX = Math.max(nodeWidth/2 + margin, Math.min(w - nodeWidth/2 - margin, x));
        const finalY = Math.max(nodeHeight/2 + margin, Math.min(h - nodeHeight/2 - margin, y));

        // Create node
        const node = document.createElement('div');
        node.className = 'synonym-node';
        node.style.left = (finalX - nodeWidth/2) + 'px';
        node.style.top = (finalY - nodeHeight/2) + 'px';
        node.style.animationDelay = (i * 0.1) + 's';

        // Create label
        const label = document.createElement('span');
        label.className = 'synonym-label';
        label.style.background = colorPalette[i % colorPalette.length];
        label.innerText = synonym.word;
        node.appendChild(label);

        // Create example with source
        const example = document.createElement('div');
        example.className = 'example';
        example.style.borderLeftColor = borderColors[i % borderColors.length];
        example.innerHTML = `
          "${synonym.contextualExample || getImprovedContextualExample(mainWord, synonym.word)}"
          <div class="example-source">${synonym.source || 'Generated'}</div>
        `;
        node.appendChild(example);

        area.appendChild(node);

        // Create connection line
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', cx);
        line.setAttribute('y1', cy);
        line.setAttribute('x2', finalX);
        line.setAttribute('y2', finalY);
        line.setAttribute('stroke', borderColors[i % borderColors.length]);
        line.className = 'connection-line';
        line.style.animationDelay = (i * 0.05) + 's';
        svg.appendChild(line);
      });

      // Add stats
      const stats = document.createElement('div');
      stats.className = 'stats';
      const totalSynonyms = allSynonyms.length;
      const currentStart = currentPage * SYNONYMS_PER_PAGE + 1;
      const currentEnd = Math.min((currentPage + 1) * SYNONYMS_PER_PAGE, totalSynonyms);
      
      if (totalSynonyms > SYNONYMS_PER_PAGE) {
        stats.innerHTML = `
          Showing <strong>${currentStart}-${currentEnd}</strong> of <strong>${totalSynonyms}</strong> synonyms for "<strong>${mainWord}</strong>"
        `;
      } else {
        stats.innerHTML = `Found <strong>${totalSynonyms}</strong> synonyms for "<strong>${mainWord}</strong>"`;
      }
      area.appendChild(stats);
    }

    // Initialize
    window.addEventListener('load', () => {
      document.getElementById('wordInput').focus();
    });
  </script>
</body>
</html>